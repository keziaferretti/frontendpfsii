{"ast":null,"code":"var _jsxFileName = \"C:\\\\unoeste\\\\Analise e desenvolvimente sistema\\\\4 semestre\\\\PROGRAMA\\xC7\\xC3O FULL STACK II\\\\frontEnd\\\\src\\\\interfaces\\\\TelaCadastroLivro.jsx\",\n  _s = $RefreshSig$();\nimport FormLivro from \"../Formularios/FormLivro.jsx\";\nimport Pagina from \"../templates/componentes/Pagina.js\";\nimport TabelaLivro from \"../tabelas/TabelaLivro.jsx\";\nimport { useState, useEffect } from \"react\";\nimport { urlBase } from \"../utilitarios/definicoes.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function TelaCadastroLivro(props) {\n  _s();\n  const [exibirTabela, setExibirTabela] = useState(true);\n  const [livros, setLivros] = useState([]);\n  const [modoEdicao, setModoEdicao] = useState(false);\n  const [erro, setErro] = useState(null);\n  const [processado, setProcessado] = useState(false);\n  const [livroEmEdicao, setLivroEmEdicao] = useState({\n    codigo: \"\",\n    titulo: \"\",\n    editora: \"\",\n    edicao: \"\",\n    anoDePublicacao: \"\"\n  });\n  function prepararTituloParaEdicao(livros) {\n    setModoEdicao(true);\n    setLivroEmEdicao(livros);\n    setExibirTabela(false);\n  }\n  function apagarTitulo(livro) {\n    fetch(urlBase + \"/acervos\", {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(livro)\n    }).then(resposta => {\n      return resposta.json();\n    }).then(retorno => {\n      if (retorno.resultado) {\n        window.alert(\"Não foi possivel excluir o Titulo!\");\n      } else {\n        buscarLivros();\n      }\n    });\n  }\n  function buscarLivros() {\n    fetch(urlBase + \"/emprestimo\", {\n      method: \"GET\"\n    }).then(resposta => {\n      if (!resposta.ok) {\n        throw new Error('Erro na requisição');\n      }\n      return resposta.json();\n    }).then(dados => {\n      if (Array.isArray(dados)) {\n        setExemplar(dados);\n        exibirTabela(true);\n      } else {\n        setErro(dados.status);\n      }\n      setProcessado(true);\n    }).catch(error => {\n      console.error('Erro na busca de exemplar:', error);\n      setProcessado(true);\n    });\n  }\n  useEffect(() => {\n    buscarLivros();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Pagina, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: exibirTabela ? /*#__PURE__*/_jsxDEV(TabelaLivro, {\n        listaLivros: livros,\n        setLivros: setLivros,\n        buscar: buscarLivros,\n        exibirTabela: setExibirTabela,\n        editarLivro: prepararTituloParaEdicao,\n        excluirTitulo: apagarTitulo,\n        setModoEdicao: setModoEdicao\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(FormLivro, {\n        listaLivros: livros,\n        setLivros: setLivros,\n        exibirTabela: setExibirTabela,\n        buscar: buscarLivros,\n        modoEdicao: modoEdicao,\n        setModoEdicao: setModoEdicao,\n        livros: livroEmEdicao\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 13\n  }, this);\n}\n_s(TelaCadastroLivro, \"K3J1YJklBqDsZ8x8onq+7I51dVA=\");\n_c = TelaCadastroLivro;\nvar _c;\n$RefreshReg$(_c, \"TelaCadastroLivro\");","map":{"version":3,"names":["FormLivro","Pagina","TabelaLivro","useState","useEffect","urlBase","jsxDEV","_jsxDEV","TelaCadastroLivro","props","_s","exibirTabela","setExibirTabela","livros","setLivros","modoEdicao","setModoEdicao","erro","setErro","processado","setProcessado","livroEmEdicao","setLivroEmEdicao","codigo","titulo","editora","edicao","anoDePublicacao","prepararTituloParaEdicao","apagarTitulo","livro","fetch","method","headers","body","JSON","stringify","then","resposta","json","retorno","resultado","window","alert","buscarLivros","ok","Error","dados","Array","isArray","setExemplar","status","catch","error","console","children","listaLivros","buscar","editarLivro","excluirTitulo","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/unoeste/Analise e desenvolvimente sistema/4 semestre/PROGRAMAÇÃO FULL STACK II/frontEnd/src/interfaces/TelaCadastroLivro.jsx"],"sourcesContent":["import FormLivro from \"../Formularios/FormLivro.jsx\";\nimport Pagina from \"../templates/componentes/Pagina.js\";\nimport TabelaLivro from \"../tabelas/TabelaLivro.jsx\";\nimport { useState, useEffect } from \"react\";\nimport { urlBase } from \"../utilitarios/definicoes.js\";\n\n\nexport default function TelaCadastroLivro(props){\n\n    const [exibirTabela, setExibirTabela] = useState(true);\n    const [livros, setLivros] = useState([]);\n    const [modoEdicao, setModoEdicao] = useState(false);\n    const [erro, setErro] = useState(null)\n    const [processado, setProcessado] = useState(false);\n    const [livroEmEdicao, setLivroEmEdicao] = useState(\n        {\n            codigo: \"\",\n            titulo : \"\",\n            editora : \"\",\n            edicao : \"\",\n            anoDePublicacao : \"\"\n        }\n    );\n\n    function prepararTituloParaEdicao(livros){\n        setModoEdicao(true);\n        setLivroEmEdicao(livros)\n        setExibirTabela(false);\n    }\n\n    function apagarTitulo(livro){\n        fetch(urlBase+\"/acervos\", {\n            method: 'DELETE',\n            headers: {\n                'Content-Type': 'application/json'},\n            body: JSON.stringify(livro)\n            }).then((resposta) =>{\n                return resposta.json();\n            }).then((retorno) =>{\n                if (retorno.resultado){\n                    window.alert(\"Não foi possivel excluir o Titulo!\")                   \n                }\n                else {\n                    buscarLivros()\n                }\n            })\n\n    }\n\n    function buscarLivros(){\n        fetch(urlBase + \"/emprestimo\", {\n            method: \"GET\"\n        })\n        .then((resposta) => {\n            if (!resposta.ok) {\n                throw new Error('Erro na requisição');\n            }\n            return resposta.json();\n        })\n        .then((dados) => {\n            if (Array.isArray(dados)) {\n                setExemplar(dados);\n                exibirTabela(true);\n            } else {\n                setErro(dados.status);\n            }\n            setProcessado(true);\n        })\n        .catch((error) => {\n            console.error('Erro na busca de exemplar:', error);\n            setProcessado(true);\n        });\n\n    }    \n\n    useEffect(()=>{\n        buscarLivros();\n    },[]);\n    \n    return (\n            \n            <Pagina>\n                <div>\n                    {\n                        exibirTabela ? \n                        <TabelaLivro listaLivros={livros} \n                                     setLivros={setLivros}\n                                     buscar={buscarLivros}\n                                     exibirTabela={setExibirTabela}\n                                     editarLivro={prepararTituloParaEdicao}\n                                     excluirTitulo={apagarTitulo}\n                                     setModoEdicao={setModoEdicao}\n                                     /> \n                        : \n                        <FormLivro listaLivros={livros}\n                                   setLivros={setLivros} \n                                   exibirTabela={setExibirTabela}\n                                   buscar={buscarLivros}\n                                   modoEdicao={modoEdicao}\n                                   setModoEdicao={setModoEdicao}\n                                   livros={livroEmEdicao}\n                                   />\n                    }\n                </div>\n            </Pagina>\n            \n            \n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}