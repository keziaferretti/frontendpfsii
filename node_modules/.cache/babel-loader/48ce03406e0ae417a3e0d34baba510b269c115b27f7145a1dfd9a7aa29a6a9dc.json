{"ast":null,"code":"var _jsxFileName = \"C:\\\\unoeste\\\\Analise e desenvolvimente sistema\\\\4 semestre\\\\PROGRAMA\\xC7\\xC3O FULL STACK II\\\\frontEnd\\\\src\\\\interfaces\\\\TelaCadastroPessoa.jsx\",\n  _s = $RefreshSig$();\nimport Pagina from \"../templates/componentes/Pagina.js\";\nimport FormPessoa from \"../Formularios/FormPessoa.jsx\";\nimport TabelaPessoa from \"../tabelas/TabelaPessoa.jsx\";\nimport { useState, useEffect } from \"react\";\nimport \"../tabelas/estilos/tabela.css\";\nimport { urlBase } from \"../utilitarios/definicoes.js\";\nimport { Spinner } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function TelaCadastroPessoa(props) {\n  _s();\n  const [exibirTabela, setExibirTabela] = useState(true);\n  const [pessoas, setPessoas] = useState([]);\n  const [modoEdicao, setModoEdicao] = useState(false);\n  const [erro, setErro] = useState(null);\n  const [processado, setProcessado] = useState(false);\n  const [pessoaEmEdicao, setPessoaEmEdicao] = useState({\n    cpf: \"\",\n    categoria: \"\",\n    nome: \"\",\n    sexo: \"\",\n    email: \"\",\n    telefone: \"\",\n    cidade: \"\",\n    endereco: \"\",\n    cep: \"\",\n    dataNasc: \"\"\n  });\n  function prepararPessoaParaEdicao(pessoa) {\n    setModoEdicao(true);\n    setPessoaEmEdicao(pessoa);\n    setExibirTabela(false);\n  }\n  function buscarPessoas() {\n    fetch(urlBase + \"/pessoas\", {\n      method: \"GET\"\n    }).then(resposta => {\n      return resposta.json();\n    }).then(dados => {\n      if (Array.isArray(dados)) {\n        setProcessado(true);\n        setPessoas(dados);\n      } else {\n        setProcessado(true);\n        setErro(dados.status);\n      }\n    });\n  }\n  function apagarPessoa(pessoa) {\n    fetch(urlBase + \"/pessoas\", {\n      method: \"DELETE\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(pessoa)\n    }).then(resposta => {\n      return resposta.json();\n    }).then(retorno => {\n      if (retorno.resultado) {\n        alert(\"Não foi possível excluir a pessoa!\");\n      } else {\n        buscarPessoas();\n      }\n    });\n  }\n  useEffect(() => {\n    buscarPessoas();\n  }, []);\n  if (erro) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\" Erro ao obter pessoas do Backend : \", erro.message]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 16\n    }, this);\n  } else if (!processado) {\n    return /*#__PURE__*/_jsxDEV(Spinner, {\n      animation: \"border\",\n      role: \"status\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"visually-hidden\",\n        children: \"Carregando Pessoas...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 16\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(Pagina, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [exibirTabela ? /*#__PURE__*/_jsxDEV(TabelaPessoa, {\n          listaPessoas: pessoas,\n          buscar: buscarPessoas,\n          setPessoas: setPessoas,\n          exibirTabela: setExibirTabela,\n          editarPessoa: prepararPessoaParaEdicao,\n          excluirPessoa: apagarPessoa,\n          setModoEdicao: setModoEdicao\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(FormPessoa, {\n          listaPessoas: pessoas,\n          setPessoas: setPessoas,\n          exibirTabela: setExibirTabela,\n          buscar: buscarPessoas,\n          modoEdicao: modoEdicao,\n          setModoEdicao: setModoEdicao,\n          pessoa: pessoaEmEdicao\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 25\n        }, this), \";\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 16\n    }, this);\n  }\n}\n_s(TelaCadastroPessoa, \"Ab6k/VgvM54BZAncbzWXexgDqL0=\");\n_c = TelaCadastroPessoa;\nvar _c;\n$RefreshReg$(_c, \"TelaCadastroPessoa\");","map":{"version":3,"names":["Pagina","FormPessoa","TabelaPessoa","useState","useEffect","urlBase","Spinner","jsxDEV","_jsxDEV","TelaCadastroPessoa","props","_s","exibirTabela","setExibirTabela","pessoas","setPessoas","modoEdicao","setModoEdicao","erro","setErro","processado","setProcessado","pessoaEmEdicao","setPessoaEmEdicao","cpf","categoria","nome","sexo","email","telefone","cidade","endereco","cep","dataNasc","prepararPessoaParaEdicao","pessoa","buscarPessoas","fetch","method","then","resposta","json","dados","Array","isArray","status","apagarPessoa","headers","body","JSON","stringify","retorno","resultado","alert","children","message","fileName","_jsxFileName","lineNumber","columnNumber","animation","role","className","listaPessoas","buscar","editarPessoa","excluirPessoa","_c","$RefreshReg$"],"sources":["C:/unoeste/Analise e desenvolvimente sistema/4 semestre/PROGRAMAÇÃO FULL STACK II/frontEnd/src/interfaces/TelaCadastroPessoa.jsx"],"sourcesContent":["import Pagina from \"../templates/componentes/Pagina.js\";\r\nimport FormPessoa from \"../Formularios/FormPessoa.jsx\";\r\nimport TabelaPessoa from \"../tabelas/TabelaPessoa.jsx\";\r\nimport { useState, useEffect } from \"react\";\r\nimport \"../tabelas/estilos/tabela.css\";\r\nimport { urlBase } from \"../utilitarios/definicoes.js\";\r\nimport { Spinner } from \"react-bootstrap\";\r\n\r\nexport default function TelaCadastroPessoa(props) {\r\n    const [exibirTabela, setExibirTabela] = useState(true);\r\n    const [pessoas, setPessoas] = useState([]);\r\n    const [modoEdicao, setModoEdicao] = useState(false);\r\n    const [erro, setErro] = useState(null);\r\n    const [processado, setProcessado] = useState(false);\r\n    const [pessoaEmEdicao, setPessoaEmEdicao] = useState(\r\n        {\r\n            cpf: \"\",\r\n            categoria: \"\",\r\n            nome: \"\",\r\n            sexo: \"\",\r\n            email: \"\",\r\n            telefone: \"\",\r\n            cidade: \"\",\r\n            endereco: \"\",\r\n            cep: \"\",\r\n            dataNasc: \"\"\r\n        }\r\n    );\r\n\r\n    function prepararPessoaParaEdicao(pessoa) {\r\n        setModoEdicao(true);\r\n        setPessoaEmEdicao(pessoa);\r\n        setExibirTabela(false);\r\n    }\r\n\r\n    function buscarPessoas() {\r\n        fetch(urlBase + \"/pessoas\", {\r\n            method: \"GET\"\r\n        }).then((resposta) => {\r\n            return resposta.json();\r\n        }).then((dados) => {\r\n            if (Array.isArray(dados)) {\r\n                setProcessado(true);\r\n                setPessoas(dados);\r\n            }\r\n            else {\r\n                setProcessado(true);\r\n                setErro(dados.status)\r\n            }\r\n        });\r\n    }\r\n\r\n    function apagarPessoa(pessoa) {\r\n        fetch(urlBase + \"/pessoas\", {\r\n            method: \"DELETE\",\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(pessoa)\r\n        }).then((resposta) => {\r\n            return resposta.json()\r\n        }).then((retorno) => {\r\n            if (retorno.resultado) {\r\n                alert(\"Não foi possível excluir a pessoa!\");\r\n            }\r\n            else {\r\n                buscarPessoas();\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        buscarPessoas();\r\n    }, []);\r\n\r\n    if (erro) {\r\n        return <div>\r\n            <p> Erro ao obter pessoas do Backend : {erro.message}</p>\r\n        </div>\r\n    }\r\n    else if (!processado) {\r\n        return <Spinner animation=\"border\" role=\"status\">\r\n            <span className=\"visually-hidden\">Carregando Pessoas...</span>\r\n        </Spinner>\r\n    }\r\n    else {\r\n        return <Pagina>\r\n            <div>\r\n                {\r\n                    exibirTabela ?\r\n                        <TabelaPessoa listaPessoas={pessoas}\r\n                            buscar={buscarPessoas}\r\n                            setPessoas={setPessoas}\r\n                            exibirTabela={setExibirTabela}\r\n                            editarPessoa={prepararPessoaParaEdicao}\r\n                            excluirPessoa={apagarPessoa}\r\n                            setModoEdicao={setModoEdicao}\r\n                        /> :\r\n                        <FormPessoa listaPessoas={pessoas}\r\n                            setPessoas={setPessoas}\r\n                            exibirTabela={setExibirTabela}\r\n                            buscar={buscarPessoas}\r\n                            modoEdicao={modoEdicao}\r\n                            setModoEdicao={setModoEdicao}\r\n                            pessoa={pessoaEmEdicao} />\r\n                };\r\n            </div>\r\n        </Pagina>\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}