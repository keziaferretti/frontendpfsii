{"ast":null,"code":"import _defineProperty from\"C:/unoeste/Analise e desenvolvimente sistema/4 semestre/PROGRAMA\\xC7\\xC3O FULL STACK II/frontEnd/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"C:/unoeste/Analise e desenvolvimente sistema/4 semestre/PROGRAMA\\xC7\\xC3O FULL STACK II/frontEnd/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{Container,Col,Form,Row,Spinner}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CaixaSelecao(_ref){var _useState3;var enderecoFonteDados=_ref.enderecoFonteDados,campoChave=_ref.campoChave,campoExibicao=_ref.campoExibicao,funcaoSelecao=_ref.funcaoSelecao;var _useState=useState((_useState3={},_defineProperty(_useState3,campoChave,0),_defineProperty(_useState3,campoExibicao,\"Não foi possível obter os dados do backend\"),_useState3)),_useState2=_slicedToArray(_useState,2),valorSelecionado=_useState2[0],setValorSelecionado=_useState2[1];var _useState4=useState(false),_useState5=_slicedToArray(_useState4,2),carregandoDados=_useState5[0],setCarregandoDados=_useState5[1];var _useState6=useState([]),_useState7=_slicedToArray(_useState6,2),dados=_useState7[0],setDados=_useState7[1];useEffect(function(){try{setCarregandoDados(true);fetch(enderecoFonteDados,{method:\"GET\"}).then(function(resposta){if(resposta.ok){return resposta.json();}else{var _ref2;return[(_ref2={},_defineProperty(_ref2,campoChave,0),_defineProperty(_ref2,campoExibicao,\"Não foi possível obter os dados do backend\"),_ref2)];}}).then(function(listaDados){setCarregandoDados(false);setDados(listaDados);if(listaDados.length>0){setValorSelecionado(listaDados[0]);funcaoSelecao(listaDados[0]);}});}catch(erro){var _ref3;setCarregandoDados(false);setDados([(_ref3={},_defineProperty(_ref3,campoChave,0),_defineProperty(_ref3,campoExibicao,\"Não foi possível obter os dados do backend: \"+erro.message),_ref3)]);}},[]);return/*#__PURE__*/_jsx(Container,{border:true,children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:11,children:/*#__PURE__*/_jsx(Form.Select,{onChange:function onChange(evento){var itemSelecionado=evento.currentTarget.value;var pos=dados.map(function(item){return item[campoChave].toString();}).indexOf(itemSelecionado);setValorSelecionado(dados[pos]);funcaoSelecao(dados[pos]);},children:dados.map(function(item){return/*#__PURE__*/_jsx(\"option\",{value:item[campoChave],children:item[campoExibicao]},item[campoChave]);})})}),/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Spinner,{className:carregandoDados?\"visible\":\"invisible\"})})]})});}","map":{"version":3,"names":["useEffect","useState","Container","Col","Form","Row","Spinner","jsx","_jsx","jsxs","_jsxs","CaixaSelecao","_ref","_useState3","enderecoFonteDados","campoChave","campoExibicao","funcaoSelecao","_useState","_defineProperty","_useState2","_slicedToArray","valorSelecionado","setValorSelecionado","_useState4","_useState5","carregandoDados","setCarregandoDados","_useState6","_useState7","dados","setDados","fetch","method","then","resposta","ok","json","_ref2","listaDados","length","erro","_ref3","message","border","children","md","Select","onChange","evento","itemSelecionado","currentTarget","value","pos","map","item","toString","indexOf","className"],"sources":["C:/unoeste/Analise e desenvolvimente sistema/4 semestre/PROGRAMAÇÃO FULL STACK II/frontEnd/src/componentes/busca/CaixaSelecao.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { Container, Col, Form, Row, Spinner } from \"react-bootstrap\";\r\n\r\nexport default function CaixaSelecao({ \r\n                                        enderecoFonteDados,\r\n                                        campoChave,\r\n                                        campoExibicao,\r\n                                        funcaoSelecao \r\n                                    }) {\r\n\r\n    const [valorSelecionado, setValorSelecionado] = useState({\r\n                            [campoChave]: 0,\r\n                            [campoExibicao]:\"Não foi possível obter os dados do backend\"\r\n                        });\r\n    const [carregandoDados, setCarregandoDados] = useState(false);\r\n    const [dados, setDados] = useState([]);\r\n\r\n    useEffect(() => {\r\n        try {\r\n            setCarregandoDados(true);\r\n            fetch(enderecoFonteDados, \r\n                { method: \"GET\" })\r\n                .then((resposta) => {\r\n                if (resposta.ok) {  \r\n                    return resposta.json();\r\n                }\r\n                else {\r\n                    return ([{\r\n                        [campoChave]: 0,\r\n                        [campoExibicao]:\"Não foi possível obter os dados do backend\"\r\n                    }\r\n                    ]);\r\n                }\r\n            }).then((listaDados) => {\r\n                setCarregandoDados(false);\r\n                setDados(listaDados);\r\n                if (listaDados.length > 0){\r\n                   setValorSelecionado(listaDados[0]);\r\n                   funcaoSelecao(listaDados[0]);     \r\n                }\r\n            });\r\n        }catch(erro){\r\n            setCarregandoDados(false);\r\n            setDados([{\r\n                       [campoChave]: 0,\r\n                       [campoExibicao]: \"Não foi possível obter os dados do backend: \" + erro.message \r\n                      }\r\n                    ]);\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <Container border>\r\n            <Row>\r\n                <Col md={11}>\r\n                    <Form.Select\r\n                                 onChange={(evento) => {\r\n                                    const itemSelecionado = evento.currentTarget.value;\r\n                                    const pos = dados.map((item) => item[campoChave]\r\n                                    .toString())\r\n                                    .indexOf(itemSelecionado);\r\n                                    setValorSelecionado(dados[pos]);\r\n                                    funcaoSelecao(dados[pos]);\r\n                                 }}>\r\n                        {\r\n                            dados.map((item) => {\r\n                                return <option key={item[campoChave]} \r\n                                               value={item[campoChave]}>\r\n                                                {item[campoExibicao]}\r\n                                       </option>\r\n                            })\r\n                        }\r\n                        \r\n                    </Form.Select>\r\n                </Col>\r\n                <Col md={1}>\r\n                    <Spinner \r\n                    className={carregandoDados ? \"visible\" : \"invisible\"}\r\n                    ></Spinner>\r\n                </Col>\r\n            </Row>\r\n        </Container>\r\n    );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}