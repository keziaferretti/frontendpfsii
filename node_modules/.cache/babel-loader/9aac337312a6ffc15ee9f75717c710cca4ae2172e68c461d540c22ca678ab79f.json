{"ast":null,"code":"import _slicedToArray from\"C:/unoeste/Analise e desenvolvimente sistema/4 semestre/PROGRAMA\\xC7\\xC3O FULL STACK II/frontEnd/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import FormLivro from\"../Formularios/FormLivro.jsx\";import Pagina from\"../templates/componentes/Pagina.js\";import TabelaLivro from\"../tabelas/TabelaLivro.jsx\";import{useState,useEffect}from\"react\";import{urlBase}from\"../utilitarios/definicoes.js\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function TelaCadastroLivro(props){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),exibirTabela=_useState2[0],setExibirTabela=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),livros=_useState4[0],setLivros=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),modoEdicao=_useState6[0],setModoEdicao=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),erro=_useState8[0],setErro=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),processado=_useState10[0],setProcessado=_useState10[1];var _useState11=useState({codigo:\"\",titulo:\"\",editora:\"\",edicao:\"\",anoDePublicacao:\"\"}),_useState12=_slicedToArray(_useState11,2),livroEmEdicao=_useState12[0],setLivroEmEdicao=_useState12[1];function prepararTituloParaEdicao(livros){setModoEdicao(true);setLivroEmEdicao(livros);setExibirTabela(false);}function apagarTitulo(livro){fetch(urlBase+\"/acervos\",{method:'DELETE',headers:{'Content-Type':'application/json'},body:JSON.stringify(livro)}).then(function(resposta){return resposta.json();}).then(function(retorno){if(retorno.resultado){window.alert(\"Não foi possivel excluir o Titulo!\");}else{buscarLivros();}});}function buscarLivros(){fetch(urlBase+\"/acervos\",{method:\"GET\"}).then(function(resposta){return resposta.json();}).then(function(dados){if(Array.isArray(dados)){setProcessado(true);setLivros(dados);}else{setProcessado(true);setErro(dados.status);}});}useEffect(function(){buscarLivros();},[]);return/*#__PURE__*/_jsx(Pagina,{children:/*#__PURE__*/_jsx(\"div\",{children:exibirTabela?/*#__PURE__*/_jsx(TabelaLivro,{listaLivros:livros,setLivros:setLivros,buscar:buscarLivros,exibirTabela:setExibirTabela,editarLivro:prepararTituloParaEdicao,excluirTitulo:apagarTitulo,setModoEdicao:setModoEdicao}):/*#__PURE__*/_jsx(FormLivro,{listaLivros:livros,setLivros:setLivros,exibirTabela:setExibirTabela,buscar:buscarLivros,modoEdicao:modoEdicao,setModoEdicao:setModoEdicao,livros:livroEmEdicao})})});}","map":{"version":3,"names":["FormLivro","Pagina","TabelaLivro","useState","useEffect","urlBase","jsx","_jsx","TelaCadastroLivro","props","_useState","_useState2","_slicedToArray","exibirTabela","setExibirTabela","_useState3","_useState4","livros","setLivros","_useState5","_useState6","modoEdicao","setModoEdicao","_useState7","_useState8","erro","setErro","_useState9","_useState10","processado","setProcessado","_useState11","codigo","titulo","editora","edicao","anoDePublicacao","_useState12","livroEmEdicao","setLivroEmEdicao","prepararTituloParaEdicao","apagarTitulo","livro","fetch","method","headers","body","JSON","stringify","then","resposta","json","retorno","resultado","window","alert","buscarLivros","dados","Array","isArray","status","children","listaLivros","buscar","editarLivro","excluirTitulo"],"sources":["C:/unoeste/Analise e desenvolvimente sistema/4 semestre/PROGRAMAÇÃO FULL STACK II/frontEnd/src/interfaces/TelaCadastroLivro.jsx"],"sourcesContent":["import FormLivro from \"../Formularios/FormLivro.jsx\";\nimport Pagina from \"../templates/componentes/Pagina.js\";\nimport TabelaLivro from \"../tabelas/TabelaLivro.jsx\";\nimport { useState, useEffect } from \"react\";\nimport { urlBase } from \"../utilitarios/definicoes.js\";\n\n\nexport default function TelaCadastroLivro(props){\n\n    const [exibirTabela, setExibirTabela] = useState(true);\n    const [livros, setLivros] = useState([]);\n    const [modoEdicao, setModoEdicao] = useState(false);\n    const [erro, setErro] = useState(null)\n    const [processado, setProcessado] = useState(false);\n    const [livroEmEdicao, setLivroEmEdicao] = useState(\n        {\n            codigo: \"\",\n            titulo : \"\",\n            editora : \"\",\n            edicao : \"\",\n            anoDePublicacao : \"\"\n        }\n    );\n\n    function prepararTituloParaEdicao(livros){\n        setModoEdicao(true);\n        setLivroEmEdicao(livros)\n        setExibirTabela(false);\n    }\n\n    function apagarTitulo(livro){\n        fetch(urlBase+\"/acervos\", {\n            method: 'DELETE',\n            headers: {\n                'Content-Type': 'application/json'},\n            body: JSON.stringify(livro)\n            }).then((resposta) =>{\n                return resposta.json();\n            }).then((retorno) =>{\n                if (retorno.resultado){\n                    window.alert(\"Não foi possivel excluir o Titulo!\")                   \n                }\n                else {\n                    buscarLivros()\n                }\n            })\n\n    }\n\n    function buscarLivros(){\n        fetch(urlBase + \"/acervos\", {\n            method:\"GET\"\n        }).then((resposta) =>{\n            return resposta.json()\n        }).then((dados)=>{\n            if (Array.isArray(dados)){\n                setProcessado(true)\n                setLivros(dados)\n            }\n            else {\n                setProcessado(true)\n                setErro(dados.status)\n            }\n        })\n\n    }    \n\n    useEffect(()=>{\n        buscarLivros();\n    },[]);\n    \n    return (\n            \n            <Pagina>\n                <div>\n                    {\n                        exibirTabela ? \n                        <TabelaLivro listaLivros={livros} \n                                     setLivros={setLivros}\n                                     buscar={buscarLivros}\n                                     exibirTabela={setExibirTabela}\n                                     editarLivro={prepararTituloParaEdicao}\n                                     excluirTitulo={apagarTitulo}\n                                     setModoEdicao={setModoEdicao}\n                                     /> \n                        : \n                        <FormLivro listaLivros={livros}\n                                   setLivros={setLivros} \n                                   exibirTabela={setExibirTabela}\n                                   buscar={buscarLivros}\n                                   modoEdicao={modoEdicao}\n                                   setModoEdicao={setModoEdicao}\n                                   livros={livroEmEdicao}\n                                   />\n                    }\n                </div>\n            </Pagina>\n            \n            \n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}