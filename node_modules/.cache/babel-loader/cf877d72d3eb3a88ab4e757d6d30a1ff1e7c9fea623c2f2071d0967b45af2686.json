{"ast":null,"code":"var _jsxFileName = \"C:\\\\unoeste\\\\Analise e desenvolvimente sistema\\\\4 semestre\\\\PROGRAMA\\xC7\\xC3O FULL STACK II\\\\frontEnd\\\\src\\\\interfaces\\\\TelaFormExemplar.jsx\",\n  _s = $RefreshSig$();\nimport Pagina from \"../templates/componentes/Pagina.js\";\nimport FormExemplar from \"../Formularios/FormExemplar.jsx\";\nimport TabelaExemplar from \"../tabelas/TabelaExemplar.jsx\";\nimport { urlBase } from \"../utilitarios/definicoes.js\";\nimport \"../tabelas/estilos/tabela.css\";\nimport { Spinner } from \"react-bootstrap\";\nimport { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function TelaFormExemplar(props) {\n  _s();\n  const [exibirTabela, setExibirTabela] = useState(true);\n  const [exemplar, setExemplar] = useState([]);\n  const [modoEdicao, setModoEdicao] = useState(false);\n  const [erro, setErro] = useState(null);\n  const [processado, setProcessado] = useState(false);\n  const [exemplarEmEdicao, setExemplarEmEdicao] = useState({\n    codigo: \"\",\n    titulo: \"\",\n    quantidade: \"\",\n    dataCadastro: \"\",\n    acervo: {\n      codigo: \"\"\n    }\n  });\n  function prepararExemplarParaEdicao(exemplar) {\n    setModoEdicao(true);\n    setExemplarEmEdicao({\n      codigo: exemplar.codigo,\n      titulo: exemplar.acervo.titulo,\n      quantidade: exemplar.quantidade,\n      dataCadastro: exemplar.dataCadastro,\n      acervo: {\n        codigo: exemplar.acervo.codigo\n      }\n    });\n    setExibirTabela(false);\n  }\n  function apagarExemplar(exemplar) {\n    fetch(urlBase + \"/exemplar\", {\n      method: \"DELETE\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(exemplar)\n    }).then(resposta => {\n      return resposta.json();\n    }).then(retorno => {\n      if (retorno.resultado) {\n        alert(\"Não foi possível excluir a exemplar\");\n      } else {\n        buscarExemplar();\n      }\n    });\n  }\n  function buscarExemplar() {\n    fetch(urlBase + \"/exemplar\", {\n      method: \"GET\"\n    }).then(resposta => {\n      if (!resposta.ok) {\n        throw new Error('Erro na requisição');\n      }\n      return resposta.json();\n    }).then(dados => {\n      if (Array.isArray(dados)) {\n        setExemplar(dados);\n        exibirTabela(true);\n      } else {\n        setErro(dados.status);\n      }\n      setProcessado(true);\n    }).catch(error => {\n      console.error('Erro na busca de exemplar:', error);\n      setProcessado(true);\n    });\n  }\n  useEffect(() => {\n    buscarExemplar();\n  }, [buscarExemplar]);\n  if (erro) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Erro ao obter os exemplar do Backend : \", erro.message]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 16\n    }, this);\n  } else if (!processado) {\n    return /*#__PURE__*/_jsxDEV(Spinner, {\n      animation: \"border\",\n      role: \"status\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"visually-hidden\",\n        children: \"Carregando exemplar...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 16\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(Pagina, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: exibirTabela ? /*#__PURE__*/_jsxDEV(TabelaExemplar, {\n          listaExemplar: exemplar,\n          exibirTabela: setExibirTabela,\n          editarExemplar: prepararExemplarParaEdicao,\n          excluirExemplar: apagarExemplar,\n          setModoEdicao: setModoEdicao,\n          buscar: buscarExemplar,\n          setExemplar: setExemplar\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(FormExemplar, {\n          listaExemplar: exemplar,\n          setExemplar: setExemplar,\n          exibirTabela: setExibirTabela,\n          buscar: buscarExemplar,\n          modoEdicao: modoEdicao,\n          setModoEdicao: setModoEdicao,\n          exemplar: exemplarEmEdicao\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 16\n    }, this);\n  }\n}\n_s(TelaFormExemplar, \"4ffrdnSoIiesRqv7PYhH6WYl35A=\");\n_c = TelaFormExemplar;\nvar _c;\n$RefreshReg$(_c, \"TelaFormExemplar\");","map":{"version":3,"names":["Pagina","FormExemplar","TabelaExemplar","urlBase","Spinner","useState","useEffect","jsxDEV","_jsxDEV","TelaFormExemplar","props","_s","exibirTabela","setExibirTabela","exemplar","setExemplar","modoEdicao","setModoEdicao","erro","setErro","processado","setProcessado","exemplarEmEdicao","setExemplarEmEdicao","codigo","titulo","quantidade","dataCadastro","acervo","prepararExemplarParaEdicao","apagarExemplar","fetch","method","headers","body","JSON","stringify","then","resposta","json","retorno","resultado","alert","buscarExemplar","ok","Error","dados","Array","isArray","status","catch","error","console","children","message","fileName","_jsxFileName","lineNumber","columnNumber","animation","role","className","listaExemplar","editarExemplar","excluirExemplar","buscar","_c","$RefreshReg$"],"sources":["C:/unoeste/Analise e desenvolvimente sistema/4 semestre/PROGRAMAÇÃO FULL STACK II/frontEnd/src/interfaces/TelaFormExemplar.jsx"],"sourcesContent":["import Pagina from \"../templates/componentes/Pagina.js\";\nimport FormExemplar from \"../Formularios/FormExemplar.jsx\";\nimport TabelaExemplar from \"../tabelas/TabelaExemplar.jsx\";\nimport { urlBase } from \"../utilitarios/definicoes.js\";\nimport \"../tabelas/estilos/tabela.css\";\nimport {Spinner} from \"react-bootstrap\"\nimport { useState, useEffect } from \"react\";\n\nexport default function TelaFormExemplar(props){\n\n    const [exibirTabela, setExibirTabela] = useState (true);\n    const [exemplar, setExemplar] = useState ([]);\n    const [modoEdicao, setModoEdicao] = useState (false);\n    const [erro, setErro] = useState(null);\n    const [processado, setProcessado] = useState (false);\n    const [exemplarEmEdicao, setExemplarEmEdicao] = useState({\n        codigo: \"\",\n        titulo: \"\",\n        quantidade: \"\",\n        dataCadastro: \"\",\n        acervo: {\n            codigo: \"\",\n        }\n    });\n\n    function prepararExemplarParaEdicao(exemplar) {\n        setModoEdicao(true);\n        setExemplarEmEdicao({\n            codigo: exemplar.codigo,\n            titulo: exemplar.acervo.titulo,\n            quantidade: exemplar.quantidade,\n            dataCadastro: exemplar.dataCadastro,\n            acervo: {\n                codigo: exemplar.acervo.codigo\n            },\n            \n        });\n        setExibirTabela(false);\n    }\n    \n\n    function apagarExemplar(exemplar){\n        fetch(urlBase+\"/exemplar\", {\n            method: \"DELETE\",\n            headers:{'Content-Type':'application/json'},\n            body: JSON.stringify(exemplar)\n        }).then((resposta) =>{\n            return resposta.json()\n        }).then((retorno) => {\n            if(retorno.resultado){\n                alert(\"Não foi possível excluir a exemplar\")\n            }\n            else{\n                buscarExemplar()\n            }\n        })\n    }\n\n\n    function buscarExemplar() {\n        fetch(urlBase + \"/exemplar\", {\n            method: \"GET\"\n        })\n        .then((resposta) => {\n            if (!resposta.ok) {\n                throw new Error('Erro na requisição');\n            }\n            return resposta.json();\n        })\n        .then((dados) => {\n            if (Array.isArray(dados)) {\n                setExemplar(dados);\n                exibirTabela(true);\n            } else {\n                setErro(dados.status);\n            }\n            setProcessado(true);\n        })\n        .catch((error) => {\n            console.error('Erro na busca de exemplar:', error);\n            setProcessado(true);\n        });\n    }\n    \n    \n\n    useEffect(() =>{\n        buscarExemplar();\n    },[buscarExemplar])\n\n    if (erro){\n        return <div>\n            <p>Erro ao obter os exemplar do Backend : {erro.message}</p>\n        </div>\n    }else if (!processado){\n        return <Spinner animation=\"border\" role=\"status\">\n            <span className=\"visually-hidden\">Carregando exemplar...</span>\n        </Spinner>\n    }\n    else{\n        return <Pagina>\n            <div>\n            {\n                exibirTabela ? \n                <TabelaExemplar \n                listaExemplar={exemplar} \n                exibirTabela={setExibirTabela}\n                editarExemplar={prepararExemplarParaEdicao}\n                excluirExemplar={apagarExemplar}\n                setModoEdicao={setModoEdicao}\n                buscar={buscarExemplar}\n                setExemplar={setExemplar}\n                /> \n                :\n                <FormExemplar \n                listaExemplar={exemplar} \n                setExemplar={setExemplar}\n                exibirTabela={setExibirTabela}\n                buscar={buscarExemplar}\n                modoEdicao={modoEdicao}\n                setModoEdicao={setModoEdicao}\n                exemplar={exemplarEmEdicao}\n                />\n            }\n            </div>\n        </Pagina>\n        }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}